#!/bin/bash

TAG=$1

if [ "x${TAG}" = 'x' ]; then TAG=latest; fi

# Musi byc wczytane po ustawieniu TAG
source global

read -p "Czy wejsc do kontenera ${TEMPLATE}_${TAG}? (t/n):" ANS
if [ ${ANS} != 't' ] && [ ${ANS} != 'T' ]; then
  exit
fi

# Jesli nie istnieje kontener
if ! docker ps -a|grep -q ${TEMPLATE}_TAG; then 
  docker run -it ${RUNOPT} ${TEMPLATE}:${TAG}
else
  # Jesli istnieje i nie jest uruchomiony
  if docker ps -a|grep ${TEMPLATE}_${TAG}|grep -q "Exited"; then
    docker start -ai ${TEMPLATE}_${TAG}
  else
    docker attach ${TEMPLATE}_${TAG}
  fi
fi

docker stop ${TEMPLATE}_${TAG}
docker rm ${TEMPLATE}_${TAG}
